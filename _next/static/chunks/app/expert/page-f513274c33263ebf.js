(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6071],{16893:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var a=r(95155),s=r(40283),i=r(35695),o=r(12115),n=r(66695),c=r(30285),l=r(6874),d=r.n(l),u=r(28044),p=r(57804),h=r(94063);function m(){let{userProfile:e,loading:t}=(0,s.A)(),r=(0,i.useRouter)();return((0,o.useEffect)(()=>{t||(null==e?void 0:e.role)==="expert"||r.push("/")},[e,t,r]),t)?(0,a.jsx)("div",{className:"container mx-auto py-8 px-4 text-center",children:"Loading expert dashboard..."}):(null==e?void 0:e.role)!=="expert"?(0,a.jsx)("div",{className:"container mx-auto py-12 px-4 flex flex-col items-center justify-center min-h-[calc(100vh-10rem)]",children:(0,a.jsxs)(n.Zp,{className:"w-full max-w-md text-center shadow-xl rounded-xl",children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsx)(u.A,{className:"h-16 w-16 text-destructive mx-auto mb-4"}),(0,a.jsx)(n.ZB,{className:"text-2xl",children:"Access Denied"})]}),(0,a.jsxs)(n.Wu,{children:[(0,a.jsx)(n.BT,{className:"text-lg",children:"You do not have permission to view this page. This area is restricted to agricultural experts."}),(0,a.jsx)(c.$,{asChild:!0,className:"mt-6",children:(0,a.jsx)(d(),{href:"/",children:"Go to Homepage"})})]})]})}):(0,a.jsxs)("div",{className:"container mx-auto py-8 px-4",children:[(0,a.jsxs)("header",{className:"mb-8",children:[(0,a.jsxs)("h1",{className:"text-4xl font-headline flex items-center gap-3",children:[(0,a.jsx)(p.A,{className:"h-10 w-10 text-primary"})," Expert Dashboard"]}),(0,a.jsx)("p",{className:"text-muted-foreground mt-2",children:"Review farmer queries and provide expert advice."})]}),(0,a.jsxs)(n.Zp,{className:"shadow-lg rounded-xl",children:[(0,a.jsx)(n.aR,{children:(0,a.jsx)(n.ZB,{children:"Welcome, Expert!"})}),(0,a.jsxs)(n.Wu,{children:[(0,a.jsx)("p",{children:"This is your AgriBazaar expert dashboard. Farmers may request your expertise on diagnoses they are not satisfied with."}),(0,a.jsx)("p",{className:"mt-4 text-sm",children:"You can review and respond to these queries to help fellow farmers."}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)(c.$,{variant:"default",className:"w-full",asChild:!0,children:(0,a.jsxs)(d(),{href:"/admin/expert-queries",children:[" ",(0,a.jsx)(h.A,{className:"mr-2 h-5 w-5"}),"View & Respond to Pending Farmer Queries"]})})}),(0,a.jsx)("p",{className:"mt-4 text-xs text-muted-foreground",children:"Future enhancements may include direct communication channels and personalized recommendations."})]})]})]})}},28044:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(40157).A)("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]])},30285:(e,t,r)=>{"use strict";r.d(t,{$:()=>l,r:()=>c});var a=r(95155),s=r(12115),i=r(99708),o=r(74466),n=r(59434);let c=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=s.forwardRef((e,t)=>{let{className:r,variant:s,size:o,asChild:l=!1,...d}=e,u=l?i.DX:"button";return(0,a.jsx)(u,{className:(0,n.cn)(c({variant:s,size:o,className:r})),ref:t,...d})});l.displayName="Button"},35695:(e,t,r)=>{"use strict";var a=r(18999);r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},40283:(e,t,r)=>{"use strict";r.d(t,{A:()=>d,AuthProvider:()=>u});var a=r(95155),s=r(12115),i=r(93004),o=r(80544),n=r(56631),c=r(46339);let l=(0,s.createContext)(void 0),d=()=>{let e=(0,s.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},u=e=>{let{children:t}=e,[r,d]=(0,s.useState)(null),[u,p]=(0,s.useState)(null),[h,m]=(0,s.useState)(!0);(0,s.useEffect)(()=>{console.log("AuthContext: Subscribing to auth state changes.");let e=(0,i.hg)(o.j2,async e=>{if(m(!0),d(e),e)try{console.log("AuthContext: User ".concat(e.uid," authenticated. Fetching profile..."));let t=await (0,n.VM)(e.uid);p(t),console.log("AuthContext: User profile fetched successfully:",t)}catch(t){console.error("AuthContext: Failed to fetch user profile for UID:",e.uid,"Error:",t),p(null)}finally{m(!1),console.log("AuthContext: Loading finished for authenticated user.")}else p(null),m(!1),console.log("AuthContext: No user authenticated or user logged out. Loading finished.")});return()=>{console.log("AuthContext: Unsubscribing from auth state changes."),e()}},[]);let f=async()=>{await o.j2.signOut()};return h?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-background",children:[(0,a.jsx)(c.G,{size:64}),(0,a.jsx)("p",{className:"mt-4 text-lg text-muted-foreground",children:"Initializing Session..."})]}):(0,a.jsx)(l.Provider,{value:{currentUser:r,userProfile:u,loading:h,logout:f},children:t})}},46339:(e,t,r)=>{"use strict";r.d(t,{G:()=>o});var a=r(95155),s=r(53838),i=r(59434);let o=e=>{let{className:t,size:r=24}=e;return(0,a.jsx)(s.A,{size:r,className:(0,i.cn)("animate-grow-and-sway text-primary",t)})}},53838:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(40157).A)("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]])},56631:(e,t,r)=>{"use strict";r.d(t,{G6:()=>c,VM:()=>d,WZ:()=>o,mu:()=>n});var a=r(93004),s=r(80544),i=r(35317);let o=async(e,t,r)=>{let i=await (0,a.eJ)(s.j2,e,t);return await (0,a.r7)(i.user,{displayName:r}),await l(i.user),i},n=async(e,t)=>(0,a.x9)(s.j2,e,t),c=async()=>{let e=new a.HF;try{let t=await (0,a.df)(s.j2,e);return t.user&&await l(t.user),t}catch(e){throw console.error("Error during Google sign-in:",e),e}},l=async e=>{if(!e)return;let t=(0,i.H9)(s.db,"users/".concat(e.uid)),r=await (0,i.x7)(t);if(r.exists()){let a=r.data(),s={};if(e.photoURL&&a.photoURL!==e.photoURL&&(s.photoURL=e.photoURL),e.displayName&&a.displayName!==e.displayName&&(s.displayName=e.displayName),Object.keys(s).length>0)try{await (0,i.mZ)(t,s)}catch(e){console.error("Error updating user profile on sign-in",e)}}else{let{email:r,displayName:a,uid:o,photoURL:n}=e,c=new Date().toISOString(),l=(0,i.rJ)(s.db,"users"),d=(0,i.P)(l,(0,i.AB)(1)),u=(await (0,i.GG)(d)).empty;try{await (0,i.BN)(t,{uid:o,email:r,displayName:a||(null==r?void 0:r.split("@")[0])||"User",photoURL:n||null,createdAt:c,role:u?"admin":"farmer",status:"active"})}catch(e){throw console.error("Error creating user document",e),e}}return t},d=async e=>{let t=(0,i.H9)(s.db,"users/".concat(e)),r=await (0,i.x7)(t);if(r.exists()){var a;let t=r.data(),s=(null==(a=t.createdAt)?void 0:a.toDate)?t.createdAt.toDate().toISOString():t.createdAt;return{...t,uid:e,createdAt:s}}return null}},57804:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(40157).A)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]])},59330:(e,t,r)=>{Promise.resolve().then(r.bind(r,16893))},59434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>i});var a=r(52596),s=r(39688);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},66695:(e,t,r)=>{"use strict";r.d(t,{BT:()=>l,Wu:()=>d,ZB:()=>c,Zp:()=>o,aR:()=>n,wL:()=>u});var a=r(95155),s=r(12115),i=r(59434);let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm transition-all duration-300 hover:shadow-xl hover:-translate-y-1",r),...s})});o.displayName="Card";let n=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",r),...s})});n.displayName="CardHeader";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});c.displayName="CardTitle";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",r),...s})});l.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",r),...s})});d.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",r),...s})});u.displayName="CardFooter"},80544:(e,t,r)=>{"use strict";let a,s,i,o;r.d(t,{j2:()=>s,db:()=>i,IG:()=>o});var n=r(23915),c=r(93004),l=r(35317),d=r(90858);a=0===(0,n.Dk)().length?(0,n.Wp)({apiKey:"AIzaSyBTQTCwDlpZr3mnPRi-PYNrfTdLnwW8ZYU",authDomain:"agricheck-vllr7.firebaseapp.com",projectId:"agricheck-vllr7",storageBucket:"agricheck-vllr7.appspot.com",messagingSenderId:"591803120265",appId:"1:591803120265:web:fba3074d59f86d841b2458",measurementId:"G-XXXXXXXXXX"}):(0,n.Dk)()[0],s=(0,c.xI)(a),i=(0,l.aU)(a),o=(0,d.c7)(a);let u=async()=>{let e=(0,l.wP)(i),t=!1;for(let r of["orders","diagnosis_history","chat_messages","users","products","product_categories"]){let a=(0,l.H9)(i,r,"_placeholder_");try{(await (0,l.x7)(a)).exists()||(e.set(a,{info:"This is a placeholder for the '".concat(r,"' collection."),createdAt:new Date}),t=!0)}catch(e){console.error("Error checking/creating placeholder for ".concat(r,":"),e)}}if(t)try{await e.commit(),console.log("Firestore placeholder documents created.")}catch(e){console.error("Error committing placeholder batch:",e)}},p=async()=>{let e=(0,l.H9)(i,"products","_seed_check_");try{if((await (0,l.x7)(e)).exists())return void console.log("Sample data already exists. Skipping database seeding.");console.log("Seeding database with sample data...");let t=(0,l.wP)(i);[{name:"Fertilizers"},{name:"Pesticides"},{name:"Seeds"},{name:"Herbicides"},{name:"Equipment"}].forEach(e=>{let r=(0,l.H9)((0,l.rJ)(i,"product_categories"));t.set(r,e)}),[{id:"TRACTOR-001",name:"High-Efficiency Tractor",category:"Equipment",price:75e4,stock:5,imageUrl:"https://placehold.co/600x400.png",description:"A powerful and fuel-efficient tractor for all your farming needs. Comes with a 5-year warranty.",dataAiHint:"tractor farming"},{id:"UREA-F-01",name:"Urea Fertilizer (46-0-0)",category:"Fertilizers",price:599.5,stock:200,imageUrl:"https://placehold.co/600x400.png",description:"High-quality nitrogen fertilizer to boost plant growth. Ideal for a variety of crops.",dataAiHint:"fertilizer bag"},{id:"NEEM-P-01",name:"Organic Neem Oil Pesticide",category:"Pesticides",price:850,stock:150,imageUrl:"https://placehold.co/600x400.png",description:"Eco-friendly pest control solution derived from neem seeds. Effective against a wide range of insects.",dataAiHint:"pesticide bottle"},{id:"WHEAT-S-01",name:"Certified Wheat Seeds",category:"Seeds",price:1200,stock:500,imageUrl:"https://placehold.co/600x400.png",description:"High-yield, disease-resistant wheat seeds suitable for Indian climates. Pack of 10kg.",dataAiHint:"wheat seeds"},{id:"GLYPH-H-01",name:"Glyphosate Herbicide",category:"Herbicides",price:750,stock:100,imageUrl:"https://placehold.co/600x400.png",description:"A broad-spectrum systemic herbicide used to kill weeds, especially annual broadleaf weeds and grasses.",dataAiHint:"herbicide bottle"},{id:"PUMP-E-01",name:"Manual Sprayer Pump (16L)",category:"Equipment",price:2500,stock:50,imageUrl:"https://placehold.co/600x400.png",description:"Durable and easy-to-use manual sprayer for applying fertilizers, pesticides, and herbicides.",dataAiHint:"sprayer pump"},{id:"DAP-F-02",name:"DAP Fertilizer (18-46-0)",category:"Fertilizers",price:1350,stock:180,imageUrl:"https://placehold.co/600x400.png",description:"Di-ammonium Phosphate is a widely used phosphorus fertilizer, providing essential nutrients.",dataAiHint:"fertilizer sack"},{id:"RICE-S-02",name:"Hybrid Paddy Rice Seeds",category:"Seeds",price:950,stock:400,imageUrl:"https://placehold.co/600x400.png",description:"High-yielding hybrid rice seeds known for their resistance to common pests and diseases. Pack of 5kg.",dataAiHint:"rice seeds"}].forEach(e=>{let r=(0,l.H9)(i,"products",e.id),{id:a,...s}=e;t.set(r,s)}),t.set(e,{seeded:!0,timestamp:new Date}),await t.commit(),console.log("Database seeded successfully.")}catch(e){console.error("Error seeding database: ",e)}};(async()=>{try{await (0,l.ol)(i,{cacheSizeBytes:l.H6}),console.log("Firestore offline persistence enabled.")}catch(e){"failed-precondition"===e.code||("unimplemented"===e.code?console.warn("Firestore offline persistence not supported in this browser."):console.error("Error enabling Firestore offline persistence:",e))}await u(),await p()})()},94063:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(40157).A)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,3644,668,3340,6874,8441,1684,7358],()=>t(59330)),_N_E=e.O()}]);