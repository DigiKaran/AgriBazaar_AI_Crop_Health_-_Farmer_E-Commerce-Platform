(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{5323:(e,t,s)=>{"use strict";s.d(t,{CartProvider:()=>o,_:()=>n});var a=s(95155),r=s(12115);let i=(0,r.createContext)(void 0),n=()=>{let e=(0,r.useContext)(i);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e},o=e=>{let{children:t}=e,[s,n]=(0,r.useState)([]);(0,r.useEffect)(()=>{let e=localStorage.getItem("agriBazaarCart");e&&n(JSON.parse(e))},[]),(0,r.useEffect)(()=>{localStorage.setItem("agriBazaarCart",JSON.stringify(s))},[s]);let o=e=>{n(t=>t.filter(t=>t.id!==e))},l=(0,r.useMemo)(()=>s.reduce((e,t)=>e+t.quantity,0),[s]),d=(0,r.useMemo)(()=>s.reduce((e,t)=>e+t.price*t.quantity,0),[s]);return(0,a.jsx)(i.Provider,{value:{cartItems:s,addToCart:e=>{n(t=>t.find(t=>t.id===e.id)?t.map(t=>t.id===e.id?{...t,quantity:t.quantity+1}:t):[...t,{...e,quantity:1}])},removeFromCart:o,updateQuantity:(e,t)=>{t<=0?o(e):n(s=>s.map(s=>s.id===e?{...s,quantity:t}:s))},clearCart:()=>{n([])},cartCount:l,cartTotal:d},children:t})}},26126:(e,t,s)=>{"use strict";s.d(t,{E:()=>o});var a=s(95155);s(12115);var r=s(74466),i=s(59434);let n=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:s,...r}=e;return(0,a.jsx)("div",{className:(0,i.cn)(n({variant:s}),t),...r})}},30285:(e,t,s)=>{"use strict";s.d(t,{$:()=>d,r:()=>l});var a=s(95155),r=s(12115),i=s(99708),n=s(74466),o=s(59434);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:s,variant:r,size:n,asChild:d=!1,...c}=e,u=d?i.DX:"button";return(0,a.jsx)(u,{className:(0,o.cn)(l({variant:r,size:n,className:s})),ref:t,...c})});d.displayName="Button"},30347:()=>{},31053:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,30347,23)),Promise.resolve().then(s.bind(s,52548)),Promise.resolve().then(s.bind(s,65258)),Promise.resolve().then(s.bind(s,52558)),Promise.resolve().then(s.bind(s,40283)),Promise.resolve().then(s.bind(s,5323)),Promise.resolve().then(s.bind(s,41589))},40283:(e,t,s)=>{"use strict";s.d(t,{A:()=>c,AuthProvider:()=>u});var a=s(95155),r=s(12115),i=s(93004),n=s(80544),o=s(56631),l=s(46339);let d=(0,r.createContext)(void 0),c=()=>{let e=(0,r.useContext)(d);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},u=e=>{let{children:t}=e,[s,c]=(0,r.useState)(null),[u,m]=(0,r.useState)(null),[h,f]=(0,r.useState)(!0);(0,r.useEffect)(()=>{console.log("AuthContext: Subscribing to auth state changes.");let e=(0,i.hg)(n.j2,async e=>{if(f(!0),c(e),e)try{console.log("AuthContext: User ".concat(e.uid," authenticated. Fetching profile..."));let t=await (0,o.VM)(e.uid);m(t),console.log("AuthContext: User profile fetched successfully:",t)}catch(t){console.error("AuthContext: Failed to fetch user profile for UID:",e.uid,"Error:",t),m(null)}finally{f(!1),console.log("AuthContext: Loading finished for authenticated user.")}else m(null),f(!1),console.log("AuthContext: No user authenticated or user logged out. Loading finished.")});return()=>{console.log("AuthContext: Unsubscribing from auth state changes."),e()}},[]);let p=async()=>{await n.j2.signOut()};return h?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-background",children:[(0,a.jsx)(l.G,{size:64}),(0,a.jsx)("p",{className:"mt-4 text-lg text-muted-foreground",children:"Initializing Session..."})]}):(0,a.jsx)(d.Provider,{value:{currentUser:s,userProfile:u,loading:h,logout:p},children:t})}},46339:(e,t,s)=>{"use strict";s.d(t,{G:()=>n});var a=s(95155),r=s(53838),i=s(59434);let n=e=>{let{className:t,size:s=24}=e;return(0,a.jsx)(r.A,{size:s,className:(0,i.cn)("animate-grow-and-sway text-primary",t)})}},52548:(e,t,s)=>{"use strict";s.d(t,{default:()=>i});var a=s(95155),r=s(41589);function i(){let{t:e}=(0,r.o)();return(0,a.jsx)("footer",{className:"border-t border-border/40 bg-background/95",children:(0,a.jsx)("div",{className:"container mx-auto py-6 px-4 sm:px-6 lg:px-8 text-center",children:(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e("footer.copyright",{year:new Date().getFullYear()})})})})}},52558:(e,t,s)=>{"use strict";s.d(t,{Toaster:()=>g});var a=s(95155),r=s(87481),i=s(12115),n=s(26621),o=s(74466),l=s(25318),d=s(59434);let c=n.Kq,u=i.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.LM,{ref:t,className:(0,d.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...r})});u.displayName=n.LM.displayName;let m=(0,o.F)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),h=i.forwardRef((e,t)=>{let{className:s,variant:r,...i}=e;return(0,a.jsx)(n.bL,{ref:t,className:(0,d.cn)(m({variant:r}),s),...i})});h.displayName=n.bL.displayName,i.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.rc,{ref:t,className:(0,d.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",s),...r})}).displayName=n.rc.displayName;let f=i.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.bm,{ref:t,className:(0,d.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...r,children:(0,a.jsx)(l.A,{className:"h-4 w-4"})})});f.displayName=n.bm.displayName;let p=i.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.hE,{ref:t,className:(0,d.cn)("text-sm font-semibold",s),...r})});p.displayName=n.hE.displayName;let x=i.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.VY,{ref:t,className:(0,d.cn)("text-sm opacity-90",s),...r})});function g(){let{toasts:e}=(0,r.dj)();return(0,a.jsxs)(c,{children:[e.map(function(e){let{id:t,title:s,description:r,action:i,...n}=e;return(0,a.jsxs)(h,{...n,children:[(0,a.jsxs)("div",{className:"grid gap-1",children:[s&&(0,a.jsx)(p,{children:s}),r&&(0,a.jsx)(x,{children:r})]}),i,(0,a.jsx)(f,{})]},t)}),(0,a.jsx)(u,{})]})}x.displayName=n.VY.displayName},56631:(e,t,s)=>{"use strict";s.d(t,{G6:()=>l,VM:()=>c,WZ:()=>n,mu:()=>o});var a=s(93004),r=s(80544),i=s(35317);let n=async(e,t,s)=>{let i=await (0,a.eJ)(r.j2,e,t);return await (0,a.r7)(i.user,{displayName:s}),await d(i.user),i},o=async(e,t)=>(0,a.x9)(r.j2,e,t),l=async()=>{let e=new a.HF;try{let t=await (0,a.df)(r.j2,e);return t.user&&await d(t.user),t}catch(e){throw console.error("Error during Google sign-in:",e),e}},d=async e=>{if(!e)return;let t=(0,i.H9)(r.db,"users/".concat(e.uid)),s=await (0,i.x7)(t);if(s.exists()){let a=s.data(),r={};if(e.photoURL&&a.photoURL!==e.photoURL&&(r.photoURL=e.photoURL),e.displayName&&a.displayName!==e.displayName&&(r.displayName=e.displayName),Object.keys(r).length>0)try{await (0,i.mZ)(t,r)}catch(e){console.error("Error updating user profile on sign-in",e)}}else{let{email:s,displayName:a,uid:n,photoURL:o}=e,l=new Date().toISOString(),d=(0,i.rJ)(r.db,"users"),c=(0,i.P)(d,(0,i.AB)(1)),u=(await (0,i.GG)(c)).empty;try{await (0,i.BN)(t,{uid:n,email:s,displayName:a||(null==s?void 0:s.split("@")[0])||"User",photoURL:o||null,createdAt:l,role:u?"admin":"farmer",status:"active"})}catch(e){throw console.error("Error creating user document",e),e}}return t},c=async e=>{let t=(0,i.H9)(r.db,"users/".concat(e)),s=await (0,i.x7)(t);if(s.exists()){var a;let t=s.data(),r=(null==(a=t.createdAt)?void 0:a.toDate)?t.createdAt.toDate().toISOString():t.createdAt;return{...t,uid:e,createdAt:r}}return null}},59434:(e,t,s)=>{"use strict";s.d(t,{cn:()=>i});var a=s(52596),r=s(39688);function i(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}},65258:(e,t,s)=>{"use strict";s.d(t,{default:()=>q});var a=s(95155),r=s(12115),i=s(6874),n=s.n(i),o=s(53838),l=s(54683),d=s(33349),c=s(94815),u=s(57679),m=s(17104),h=s(28341),f=s(13896),p=s(30285),x=s(9449),g=s(73158),v=s(10518),y=s(70154),b=s(59434);let j=x.bL,N=x.l9;x.YJ,x.ZL,x.Pb,x.z6,r.forwardRef((e,t)=>{let{className:s,inset:r,children:i,...n}=e;return(0,a.jsxs)(x.ZP,{ref:t,className:(0,b.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",s),...n,children:[i,(0,a.jsx)(g.A,{className:"ml-auto"})]})}).displayName=x.ZP.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(x.G5,{ref:t,className:(0,b.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r})}).displayName=x.G5.displayName;let w=r.forwardRef((e,t)=>{let{className:s,sideOffset:r=4,...i}=e;return(0,a.jsx)(x.ZL,{children:(0,a.jsx)(x.UC,{ref:t,sideOffset:r,className:(0,b.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...i})})});w.displayName=x.UC.displayName;let A=r.forwardRef((e,t)=>{let{className:s,inset:r,...i}=e;return(0,a.jsx)(x.q7,{ref:t,className:(0,b.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",s),...i})});A.displayName=x.q7.displayName,r.forwardRef((e,t)=>{let{className:s,children:r,checked:i,...n}=e;return(0,a.jsxs)(x.H_,{ref:t,className:(0,b.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:i,...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(x.VF,{children:(0,a.jsx)(v.A,{className:"h-4 w-4"})})}),r]})}).displayName=x.H_.displayName,r.forwardRef((e,t)=>{let{className:s,children:r,...i}=e;return(0,a.jsxs)(x.hN,{ref:t,className:(0,b.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...i,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(x.VF,{children:(0,a.jsx)(y.A,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=x.hN.displayName,r.forwardRef((e,t)=>{let{className:s,inset:r,...i}=e;return(0,a.jsx)(x.JU,{ref:t,className:(0,b.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",s),...i})}).displayName=x.JU.displayName;let k=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(x.wv,{ref:t,className:(0,b.cn)("-mx-1 my-1 h-px bg-muted",s),...r})});k.displayName=x.wv.displayName;var C=s(15452),S=s(74466),E=s(25318);let P=C.bL,R=C.l9;C.bm;let U=C.ZL,_=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(C.hJ,{className:(0,b.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r,ref:t})});_.displayName=C.hJ.displayName;let z=(0,S.F)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),T=r.forwardRef((e,t)=>{let{side:s="right",className:r,children:i,...n}=e;return(0,a.jsxs)(U,{children:[(0,a.jsx)(_,{}),(0,a.jsxs)(C.UC,{ref:t,className:(0,b.cn)(z({side:s}),r),...n,children:[i,(0,a.jsxs)(C.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,a.jsx)(E.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});T.displayName=C.UC.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(C.hE,{ref:t,className:(0,b.cn)("text-lg font-semibold text-foreground",s),...r})}).displayName=C.hE.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(C.VY,{ref:t,className:(0,b.cn)("text-sm text-muted-foreground",s),...r})}).displayName=C.VY.displayName;var H=s(40283),D=s(5323),I=s(41589),L=s(91394),O=s(26126);let F=()=>(0,a.jsxs)(n(),{href:"/",className:"flex items-center gap-2 text-2xl font-headline text-primary hover:text-primary/80 transition-colors",children:[(0,a.jsx)(o.A,{className:"h-7 w-7"}),"AgriBazaar"]}),M=e=>{let{className:t,itemClassName:s,onLinkClick:r,userRole:i}=e,{t:o}=(0,I.o)(),l=[{href:"/",label:o("header.home")},{href:"/diagnose",label:o("header.aiDiagnose")},{href:"/ask-expert",label:o("header.askExpert")},{href:"/products",label:o("header.products")},{href:"/chatbot",label:o("header.chatbot")},{href:"/local-info",label:o("header.localInfo")}];return"admin"===i&&l.push({href:"/admin",label:o("header.adminPanel")}),"expert"===i&&l.push({href:"/expert",label:o("header.expertDashboard")}),(0,a.jsx)("nav",{className:(0,b.cn)("items-center space-x-4 lg:space-x-6",t),children:l.map(e=>(0,a.jsx)(n(),{href:e.href,onClick:r,className:(0,b.cn)("text-sm font-medium text-foreground/80 hover:text-primary transition-colors",s),children:e.label},e.label))})};function q(){let{currentUser:e,userProfile:t,logout:s,loading:i}=(0,H.A)(),{cartCount:o}=(0,D._)(),{t:x,setLanguage:g}=(0,I.o)(),[v,y]=r.useState(!1),b=async()=>{try{await s()}catch(e){console.error("Logout failed",e)}},C=e=>{if(!e)return"U";let t=e.split(" ");return t.length>1&&t[0]&&t[t.length-1]?"".concat(t[0][0]).concat(t[t.length-1][0]).toUpperCase():e.substring(0,2).toUpperCase()},S=()=>(0,a.jsxs)(j,{children:[(0,a.jsx)(N,{asChild:!0,children:(0,a.jsx)(p.$,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:(0,a.jsxs)(L.eu,{className:"h-8 w-8",children:[(0,a.jsx)(L.BK,{src:(null==t?void 0:t.photoURL)||void 0,alt:(null==t?void 0:t.displayName)||"User"}),(0,a.jsx)(L.q5,{children:C(null==t?void 0:t.displayName)})]})})}),(0,a.jsxs)(w,{className:"w-56",align:"end",forceMount:!0,children:[(0,a.jsx)(A,{className:"font-normal",children:(0,a.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium leading-none",children:(null==t?void 0:t.displayName)||"User"}),(0,a.jsx)("p",{className:"text-xs leading-none text-muted-foreground",children:null==e?void 0:e.email}),(null==t?void 0:t.role)&&(0,a.jsxs)("p",{className:"text-xs leading-none text-muted-foreground capitalize",children:[x("common.role"),": ",t.role]})]})}),(0,a.jsx)(k,{}),(0,a.jsx)(A,{asChild:!0,children:(0,a.jsxs)(n(),{href:"/profile",children:[(0,a.jsx)(l.A,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:x("header.myProfileAndOrders")})]})}),(0,a.jsx)(k,{}),(0,a.jsxs)(A,{onClick:b,children:[(0,a.jsx)(d.A,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:x("header.logout")})]})]})]}),E=()=>(0,a.jsx)(p.$,{variant:"ghost",size:"icon",asChild:!0,children:(0,a.jsxs)(n(),{href:"/cart",className:"relative",children:[(0,a.jsx)(c.A,{className:"h-5 w-5"}),o>0&&(0,a.jsx)(O.E,{variant:"destructive",className:"absolute -top-2 -right-2 h-5 w-5 justify-center rounded-full p-0 text-xs",children:o}),(0,a.jsx)("span",{className:"sr-only",children:x("header.viewCart")})]})});return(0,a.jsx)("header",{className:"sticky top-0 z-50 w-full border-b border-border/40 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,a.jsxs)("div",{className:"container mx-auto flex h-16 items-center justify-between px-4 sm:px-6 lg:px-8",children:[(0,a.jsx)(F,{}),(0,a.jsxs)("div",{className:"hidden md:flex items-center space-x-2",children:[(0,a.jsx)(M,{userRole:null==t?void 0:t.role}),(0,a.jsx)(E,{}),i?null:e?(0,a.jsx)(S,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.$,{variant:"ghost",asChild:!0,children:(0,a.jsx)(n(),{href:"/login",children:x("header.login")})}),(0,a.jsx)(p.$,{asChild:!0,children:(0,a.jsx)(n(),{href:"/signup",children:x("header.signup")})})]}),(0,a.jsxs)(j,{children:[(0,a.jsx)(N,{asChild:!0,children:(0,a.jsxs)(p.$,{variant:"ghost",size:"icon",children:[(0,a.jsx)(u.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"sr-only",children:x("header.selectLanguage")})]})}),(0,a.jsxs)(w,{align:"end",children:[(0,a.jsx)(A,{onClick:()=>g("en"),children:x("header.english")}),(0,a.jsx)(A,{onClick:()=>g("mr"),children:x("header.marathi")}),(0,a.jsx)(A,{onClick:()=>g("hi"),children:x("header.hindi")}),(0,a.jsx)(A,{disabled:!0,children:x("header.spanishSoon")})]})]})]}),(0,a.jsxs)("div",{className:"md:hidden flex items-center",children:[(0,a.jsx)(E,{}),i?null:e?(0,a.jsx)(S,{}):(0,a.jsx)(p.$,{size:"sm",variant:"ghost",asChild:!0,onClick:()=>y(!1),children:(0,a.jsxs)(n(),{href:"/login",children:[(0,a.jsx)(m.A,{className:"mr-2 h-4 w-4"}),x("header.login")]})}),(0,a.jsxs)(P,{open:v,onOpenChange:y,children:[(0,a.jsx)(R,{asChild:!0,children:(0,a.jsxs)(p.$,{variant:"ghost",size:"icon",className:"ml-2",children:[(0,a.jsx)(h.A,{className:"h-6 w-6"}),(0,a.jsx)("span",{className:"sr-only",children:"Toggle menu"})]})}),(0,a.jsxs)(T,{side:"right",className:"w-[280px] p-6 flex flex-col",children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)(F,{})}),(0,a.jsx)(M,{className:"flex flex-col space-x-0 space-y-4",itemClassName:"text-lg",onLinkClick:()=>y(!1),userRole:null==t?void 0:t.role}),(0,a.jsxs)("div",{className:"mt-auto space-y-2",children:[i?null:e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 p-2 border-t",children:[(0,a.jsxs)(L.eu,{className:"h-8 w-8",children:[(0,a.jsx)(L.BK,{src:(null==t?void 0:t.photoURL)||void 0,alt:(null==t?void 0:t.displayName)||"User"}),(0,a.jsx)(L.q5,{children:C(null==t?void 0:t.displayName)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium leading-none",children:(null==t?void 0:t.displayName)||"User"}),(0,a.jsx)("p",{className:"text-xs leading-none text-muted-foreground",children:null==e?void 0:e.email}),(null==t?void 0:t.role)&&(0,a.jsxs)("p",{className:"text-xs leading-none text-muted-foreground capitalize",children:[x("common.role"),": ",t.role]})]})]}),(0,a.jsx)(p.$,{variant:"outline",className:"w-full",asChild:!0,onClick:()=>y(!1),children:(0,a.jsxs)(n(),{href:"/profile",children:[(0,a.jsx)(l.A,{className:"mr-2 h-4 w-4"}),x("header.myProfileAndOrders")]})}),(0,a.jsxs)(p.$,{variant:"outline",className:"w-full",onClick:()=>{b(),y(!1)},children:[(0,a.jsx)(d.A,{className:"mr-2 h-4 w-4"})," ",x("header.logout")]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.$,{variant:"outline",className:"w-full",asChild:!0,onClick:()=>y(!1),children:(0,a.jsxs)(n(),{href:"/login",children:[(0,a.jsx)(m.A,{className:"mr-2 h-4 w-4"}),x("header.login")]})}),(0,a.jsx)(p.$,{className:"w-full",asChild:!0,onClick:()=>y(!1),children:(0,a.jsxs)(n(),{href:"/signup",children:[(0,a.jsx)(f.A,{className:"mr-2 h-4 w-4"}),x("header.signup")]})})]}),(0,a.jsxs)(j,{children:[(0,a.jsx)(N,{asChild:!0,children:(0,a.jsxs)(p.$,{variant:"outline",className:"w-full justify-start",children:[(0,a.jsx)(u.A,{className:"mr-2 h-5 w-5"}),x("header.selectLanguage")]})}),(0,a.jsxs)(w,{align:"start",className:"w-[calc(280px-2*theme(spacing.6))]",children:[(0,a.jsx)(A,{onClick:()=>g("en"),children:x("header.english")}),(0,a.jsx)(A,{onClick:()=>g("mr"),children:x("header.marathi")}),(0,a.jsx)(A,{onClick:()=>g("hi"),children:x("header.hindi")}),(0,a.jsx)(A,{disabled:!0,children:x("header.spanishSoon")})]})]})]})]})]})]})]})})}},80544:(e,t,s)=>{"use strict";let a,r,i,n;s.d(t,{j2:()=>r,db:()=>i,IG:()=>n});var o=s(23915),l=s(93004),d=s(35317),c=s(90858);a=0===(0,o.Dk)().length?(0,o.Wp)({apiKey:"AIzaSyBTQTCwDlpZr3mnPRi-PYNrfTdLnwW8ZYU",authDomain:"agricheck-vllr7.firebaseapp.com",projectId:"agricheck-vllr7",storageBucket:"agricheck-vllr7.appspot.com",messagingSenderId:"591803120265",appId:"1:591803120265:web:fba3074d59f86d841b2458",measurementId:"G-XXXXXXXXXX"}):(0,o.Dk)()[0],r=(0,l.xI)(a),i=(0,d.aU)(a),n=(0,c.c7)(a);let u=async()=>{let e=(0,d.wP)(i),t=!1;for(let s of["orders","diagnosis_history","chat_messages","users","products","product_categories"]){let a=(0,d.H9)(i,s,"_placeholder_");try{(await (0,d.x7)(a)).exists()||(e.set(a,{info:"This is a placeholder for the '".concat(s,"' collection."),createdAt:new Date}),t=!0)}catch(e){console.error("Error checking/creating placeholder for ".concat(s,":"),e)}}if(t)try{await e.commit(),console.log("Firestore placeholder documents created.")}catch(e){console.error("Error committing placeholder batch:",e)}},m=async()=>{let e=(0,d.H9)(i,"products","_seed_check_");try{if((await (0,d.x7)(e)).exists())return void console.log("Sample data already exists. Skipping database seeding.");console.log("Seeding database with sample data...");let t=(0,d.wP)(i);[{name:"Fertilizers"},{name:"Pesticides"},{name:"Seeds"},{name:"Herbicides"},{name:"Equipment"}].forEach(e=>{let s=(0,d.H9)((0,d.rJ)(i,"product_categories"));t.set(s,e)}),[{id:"TRACTOR-001",name:"High-Efficiency Tractor",category:"Equipment",price:75e4,stock:5,imageUrl:"https://placehold.co/600x400.png",description:"A powerful and fuel-efficient tractor for all your farming needs. Comes with a 5-year warranty.",dataAiHint:"tractor farming"},{id:"UREA-F-01",name:"Urea Fertilizer (46-0-0)",category:"Fertilizers",price:599.5,stock:200,imageUrl:"https://placehold.co/600x400.png",description:"High-quality nitrogen fertilizer to boost plant growth. Ideal for a variety of crops.",dataAiHint:"fertilizer bag"},{id:"NEEM-P-01",name:"Organic Neem Oil Pesticide",category:"Pesticides",price:850,stock:150,imageUrl:"https://placehold.co/600x400.png",description:"Eco-friendly pest control solution derived from neem seeds. Effective against a wide range of insects.",dataAiHint:"pesticide bottle"},{id:"WHEAT-S-01",name:"Certified Wheat Seeds",category:"Seeds",price:1200,stock:500,imageUrl:"https://placehold.co/600x400.png",description:"High-yield, disease-resistant wheat seeds suitable for Indian climates. Pack of 10kg.",dataAiHint:"wheat seeds"},{id:"GLYPH-H-01",name:"Glyphosate Herbicide",category:"Herbicides",price:750,stock:100,imageUrl:"https://placehold.co/600x400.png",description:"A broad-spectrum systemic herbicide used to kill weeds, especially annual broadleaf weeds and grasses.",dataAiHint:"herbicide bottle"},{id:"PUMP-E-01",name:"Manual Sprayer Pump (16L)",category:"Equipment",price:2500,stock:50,imageUrl:"https://placehold.co/600x400.png",description:"Durable and easy-to-use manual sprayer for applying fertilizers, pesticides, and herbicides.",dataAiHint:"sprayer pump"},{id:"DAP-F-02",name:"DAP Fertilizer (18-46-0)",category:"Fertilizers",price:1350,stock:180,imageUrl:"https://placehold.co/600x400.png",description:"Di-ammonium Phosphate is a widely used phosphorus fertilizer, providing essential nutrients.",dataAiHint:"fertilizer sack"},{id:"RICE-S-02",name:"Hybrid Paddy Rice Seeds",category:"Seeds",price:950,stock:400,imageUrl:"https://placehold.co/600x400.png",description:"High-yielding hybrid rice seeds known for their resistance to common pests and diseases. Pack of 5kg.",dataAiHint:"rice seeds"}].forEach(e=>{let s=(0,d.H9)(i,"products",e.id),{id:a,...r}=e;t.set(s,r)}),t.set(e,{seeded:!0,timestamp:new Date}),await t.commit(),console.log("Database seeded successfully.")}catch(e){console.error("Error seeding database: ",e)}};(async()=>{try{await (0,d.ol)(i,{cacheSizeBytes:d.H6}),console.log("Firestore offline persistence enabled.")}catch(e){"failed-precondition"===e.code||("unimplemented"===e.code?console.warn("Firestore offline persistence not supported in this browser."):console.error("Error enabling Firestore offline persistence:",e))}await u(),await m()})()},87481:(e,t,s)=>{"use strict";s.d(t,{dj:()=>m});var a=s(12115);let r=0,i=new Map,n=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?n(s):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],d={toasts:[]};function c(e){d=o(d,e),l.forEach(e=>{e(d)})}function u(e){let{...t}=e,s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=a.useState(d);return a.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},91394:(e,t,s)=>{"use strict";s.d(t,{BK:()=>l,eu:()=>o,q5:()=>d});var a=s(95155),r=s(12115),i=s(85977),n=s(59434);let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.bL,{ref:t,className:(0,n.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...r})});o.displayName=i.bL.displayName;let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i._V,{ref:t,className:(0,n.cn)("aspect-square h-full w-full",s),...r})});l.displayName=i._V.displayName;let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.H4,{ref:t,className:(0,n.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...r})});d.displayName=i.H4.displayName}},e=>{var t=t=>e(e.s=t);e.O(0,[7690,2992,3644,668,3340,6874,1263,9037,4443,8888,1589,8441,1684,7358],()=>t(31053)),_N_E=e.O()}]);